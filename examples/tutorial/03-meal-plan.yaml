# yaml-language-server: $schema=../../schemas/workflow.schema.json
name: meal-plan
description: Generate three meals in parallel

inputs:
  - name: diet
    type: string
    default: "vegetarian"
    description: Dietary preference (e.g., vegetarian, vegan, keto)

steps:
  - id: meals
    name: Generate Meals
    type: parallel
    max_concurrency: 3
    steps:
      - id: breakfast
        name: Generate Breakfast
        type: llm
        model: balanced
        prompt: |
          Generate a {{.inputs.diet}} breakfast recipe.
          Include the recipe name, ingredients with quantities, and cooking steps.

      - id: lunch
        name: Generate Lunch
        type: llm
        model: balanced
        prompt: |
          Generate a {{.inputs.diet}} lunch recipe.
          Include the recipe name, ingredients with quantities, and cooking steps.

      - id: dinner
        name: Generate Dinner
        type: llm
        model: balanced
        prompt: |
          Generate a {{.inputs.diet}} dinner recipe.
          Include the recipe name, ingredients with quantities, and cooking steps.

outputs:
  - name: breakfast
    type: string
    value: "{{.steps.meals.breakfast.response}}"
    description: Breakfast recipe

  - name: lunch
    type: string
    value: "{{.steps.meals.lunch.response}}"
    description: Lunch recipe

  - name: dinner
    type: string
    value: "{{.steps.meals.dinner.response}}"
    description: Dinner recipe
