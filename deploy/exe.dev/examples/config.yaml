# Conductor Configuration for exe.dev Deployment
#
# This file should be placed at: ~/.config/conductor/config.yaml
#
# The install script creates a basic version automatically.
# Edit this file to customize your deployment.

# =============================================================================
# Daemon Configuration
# =============================================================================
daemon:
  listen:
    # TCP address for the daemon to listen on
    # Format: ":port" or "host:port"
    # Default: Unix socket (not usable for remote access)
    tcp_addr: ":9000"

    # Allow connections from non-localhost addresses
    # Required for exe.dev proxy to reach the daemon
    # WARNING: Only enable with authentication configured
    allow_remote: true

  # API Key Authentication
  # Required for security when allow_remote is true
  auth:
    # Enable authentication for all API requests
    enabled: true

    # List of valid API keys
    # Use environment variable substitution for security
    api_keys:
      - ${CONDUCTOR_API_KEY}

      # You can add multiple keys for different users/systems
      # - ${CI_CONDUCTOR_KEY}
      # - ${TEAMMATE_CONDUCTOR_KEY}

  # Data directory for SQLite database and other files
  # Default: ~/.local/share/conductor/
  # data_dir: ~/.local/share/conductor/

# =============================================================================
# LLM Provider Configuration
# =============================================================================
# Configure API keys for LLM providers used in your workflows.
# Use environment variables to avoid storing secrets in config files.
#
# Set environment variables before starting the daemon:
#   export ANTHROPIC_API_KEY=sk-ant-...
#   export OPENAI_API_KEY=sk-...

providers:
  # Anthropic Claude
  anthropic:
    api_key: ${ANTHROPIC_API_KEY}
    # Optional: specify default model
    # model: claude-sonnet-4-20250514

  # OpenAI
  # openai:
  #   api_key: ${OPENAI_API_KEY}
  #   # Optional: specify default model
  #   # model: gpt-4o

  # Google Gemini
  # google:
  #   api_key: ${GOOGLE_API_KEY}

  # Local Ollama (if running on same VM)
  # ollama:
  #   base_url: http://localhost:11434

# =============================================================================
# Logging Configuration
# =============================================================================
# logging:
#   # Log level: debug, info, warn, error
#   level: info
#
#   # Log format: text, json
#   format: text

# =============================================================================
# Security Configuration
# =============================================================================
# security:
#   # Default security profile for workflows
#   # Options: unrestricted, standard, strict, air-gapped
#   default_profile: standard

# =============================================================================
# Notes for exe.dev Deployment
# =============================================================================
#
# 1. Always keep auth.enabled: true when allow_remote: true
#    exe.dev provides perimeter security, but defense-in-depth is important
#
# 2. Store API keys in environment variables, not in this file
#    Add to ~/.bashrc: export ANTHROPIC_API_KEY=sk-ant-...
#
# 3. After editing this file, restart the daemon:
#    ~/stop-conductor.sh && ~/start-conductor.sh
#
# 4. The daemon logs to: ~/.local/share/conductor/conductor.log
#    Check logs for configuration errors
#
# 5. Test configuration with:
#    curl -H "Authorization: Bearer $CONDUCTOR_API_KEY" http://localhost:9000/health
